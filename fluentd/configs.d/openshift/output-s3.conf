<match output_ops_tag journal.** system.var.log** mux.ops audit.log** %OCP_FLUENTD_TAGS%>
  @type s3

  s3_bucket ewolinet-hackfest
  s3_region us-east-2
  path logs/infra/
  buffer_path /var/log/fluent/s3/infra

  time_slice_format %Y%m%d%H%M
  time_slice_wait 1m
  utc
  format json

  buffer_chunk_limit 256m

  <shared_credentials>
    path         /etc/fluent/s3/shared_credentials
    # profile_name default
  </shared_credentials>
</match>

<match **>
  @type s3

  s3_bucket ewolinet-hackfest
  s3_region us-east-2
  path logs/apps/
  buffer_path /var/log/fluent/s3/#{ENV['NAMESPACE']}

  time_slice_format %Y%m%d%H%M
  time_slice_wait 1m
  utc
  format json

  buffer_chunk_limit 256m

  <shared_credentials>
    path         /etc/fluent/s3/shared_credentials
    # profile_name default
  </shared_credentials>
</match>
